#!/bin/bash
set -e

echo "ğŸ”’ [002] Sealing Nginx Proxy Manager Admin Port (81)..."

if ufw status | grep -q "81/tcp"; then
    echo "ğŸš« removing allow rule for port 81..."
    
    ufw delete allow 81/tcp
    
    echo "âœ… Port 81 is now CLOSED to the outside world."
    echo "   Ensure you have configured a Proxy Host (admin.domain.com) inside NPM,"
    echo "   otherwise you locked yourself out! (SSH tunnel is your only hope)."
else
    echo "ğŸ¤·â€â™‚ï¸ Port 81 is already closed or not found in UFW rules."
fi

ufw reload

echo "âœ… [002] Admin Panel sealed."